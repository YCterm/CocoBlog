
<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Tabbed Profile Widget Flat Responsive Widget Template :: w3layouts</title>
<!-- for-mobile-apps -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Tabbed Profile Widget Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
 <meta http-equiv="X-UA-Compatible" content="IE=10,IE=9,IE=8,ie=7">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
     <title>袁志蒙个人博客 - YzmCMS博客</title>
	<meta name="keywords" content="个人博客,袁志蒙个人博客,技术博客,个人原创博客,php博客,个人原创网站" />
	<meta name="description" content="YzmCMS官方博客，袁志蒙的个人博客，学习并分享PHP、Linux、MySQL和前端技术等WEB知识，记录生活的点点滴滴，是一个互联网从业者值得收藏的网站。" />
    <link rel='stylesheet' id='open_social_css-css' href='https://blog.yzmcms.com/common/static/css/os.css' type='text/css' media='all' />
    <link rel="stylesheet" href="https://blog.yzmcms.com/common/static/css/style.css?v=2020" media="all">
	<link rel="stylesheet" href="https://blog.yzmcms.com/common/static/css/swiper.min.css" media="all">
	<link href="https://blog.yzmcms.com/common/static/css/font-awesome.min.css" rel="stylesheet" media="screen">
	<!-- <script type="text/javascript" src="https://blog.yzmcms.com/common/static/js/base.loading.js"></script>	 -->
  </head>
  <style>
  	.abc{
  		color:white;
  		padding-top:15px;
  	}
  	.main{
  		background-color: white;
  		
  	}
  	
  </style>
  <body class="home blog">
    <div class="placeholder"></div>		
<!--[if lt IE 9]>
  <script src="https://blog.yzmcms.com/common/static/js/html5.js"></script>
<![endif]-->
<script src="https://blog.yzmcms.com/common/static/js/jquery.js"></script>
<script>window._deel = {
	maillist: '',
	maillistCode: '',
	commenton: 0,
	roll: [0, 0]
  }</script>
<script type="text/javascript">$(function() {
	$(window).scroll(function() {
	  $offset = $('.placeholder').offset(); //不能用自身的div，不然滚动起来会很卡
	  if ($(window).scrollTop() > $offset.top) {
		$('.header').css({
		  'position': 'fixed',
		  'top': '0px',
		  'left': $offset.left + 'px',
		  'z-index': '999'
		});
		$(".container").css({
		  "margin-top": "93px"
		});
	  } else {
		$('.header').removeAttr('style');
		$('.container').removeAttr('style');
	  }
	});
  })
</script>	
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
		function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- //for-mobile-apps -->
<link href="person/css/style.css" rel="stylesheet" type="text/css" media="all" />
<script type="text/javascript" src="person/js/jquery.min.js"></script>
<link href='//fonts.googleapis.com/css?family=Lato:400,100,100italic,300italic,300,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
</head>
<script type="text/javascript">

</script>
<body>
<div th:replace="base/base::.header"></div>	
<!--密码修改模态框-->
<div class="modal fade user-select" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form id="password" method="post">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="loginModalLabel">修改密码</h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="loginModalUserNmae">旧密码</label>
            <input type="password" class="form-control" id="originalPassword" name="originalPassword" placeholder="请输入原密码" autofocus maxlength="15" autocomplete="off" required>
          </div>
          <div class="form-group">
            <label for="loginModalUserPwd">新密码</label>
            <input type="password" class="form-control" id="newPassword" name="newPassword" placeholder="请输入新密码" maxlength="18" autocomplete="off" required>
          </div>
          <div class="form-group">
            <label for="loginModalUserPwd">确认密码</label>
            <input type="password" class="form-control" id="confirmNewPassword" name="confirmNewPassword" placeholder="请确认密码" maxlength="18" autocomplete="off" required>
          </div>
          <div id="alertDiv" class="alert alert-warning alert-dismissable" style="display:none">
							<button type="button" class="close" data-dismiss="alert"
								aria-hidden="true">&times;</button>
							警告！请不要提交。
						</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
          <button type="button" class="btn btn-primary" id="updatepassword">提交</button>
        </div>
      </form>
    </div>
  </div>
</div> 

	<div class="main" >
		<div class="content">
			<div class="sap_tabs">
			<div id="horizontalTab" style=" width: 100%; margin: 0px;">
					<script src="person/js/easyResponsiveTabs.js" type="text/javascript"></script>
						<script type="text/javascript">
							$(document).ready(function () {
								$('#horizontalTab').easyResponsiveTabs({
									type: 'default', //Types: default, vertical, accordion           
									width: 'auto', //auto or any width like 600px
									fit: true,   // 100% fit in a container
									closed: 'accordion', // Start closed if in accordion view
									activate: function(event) { // Callback function if tab is switched
										var $tab = $(this);
										var $info = $('#tabInfo');
										var $name = $('span', $info);
										$name.text($tab.text());
										$info.show();
									}
								});

								$('#verticalTab').easyResponsiveTabs({
									type: 'vertical',
									width: 'auto',
									fit: true
								});
							});
						</script>
			
					 <form id="updateForm">
						<div class="portfolio-grid">
							<div class="port-left">
								<ul class="resp-tabs-list">
       									 <a>
            								<span>上传头像</span>
            								<img id="myhead" style="width:5%; margin-top: 0.5%; margin-bottom: 0.5%;">
        								</a>

								</ul>		
							</div>
							<div class="port-right">
								
									<div class="resp-tabs-container">
									
										<div class="tab-1 resp-tab-content" aria-labelledby="tab_item-4">
										
										<div class="work-play">
											
													<h3>Settings</h3>
												<h4>用户名</h4>
													<input id="unamme" name="unamme" type="text" value="" disabled="disabled">	
												
												<h4>昵称</h4>
												
													<input id="nickname" name="nickname" type="text" value="">	
												
												<h4>密码</h4>
											
													<input id="originalPassword" name="originalPassword" type="password" value="" >	
												<!-- <h4>新密码</h4>
											
													<input id="newPassword" name="newPassword" type="password" value="" >	
												<h4>确认新密码</h4>
											
													<input id="confirmNewPassword" name="confirmNewPassword" type="password" value="" >	
												 -->
												<h4>电话</h4>
											
													<input id="uphone" name="uphone" type="text" value="" >	
												
												<h4>邮箱</h4>
												
													<input id="uemail" name="uemail" type="text" value="" >	
												
											
										</div>	
										<div id="alertDiv" class="alert alert-warning alert-dismissable" style="display:none">
							<button type="button" class="close" data-dismiss="alert"
								aria-hidden="true">&times;</button>
							警告！请不要提交。
						</div>
								 <a data-toggle="modal" data-target="#loginModal" class="login" rel="nofollow">修改密码</a>
											<div class="update">
												<input type="file" name="head" id="head"/> 
											
												<input id="update" type="button" class="btn btn-primary"  value="保存" data-dismiss="modal" />
												
                		

											</div>
											<div class="clear"></div>
										</div>									
									</div>	
								
							</div>	
							<div class="clear"></div>
						</div>
				 </form>
			
			</div>
		</div>

		</div>
	</div>
	   <footer class="footer">
      <div class="footer-inner">
        <div style="padding:0 20px;overflow:hidden;">
          <div class="copyright pull-left">
            <a href="https://blog.yzmcms.com/" target="_blank">Powered By YzmCMS内容管理系统 © 2014-2020 袁志蒙工作室</a> | 京ICP备16034624号</div>
          <div class="trackcode pull-right"><script src="https://s4.cnzz.com/z_stat.php?id=1259844929&web_id=1259844929" language="JavaScript"></script></div>
        </div>
      </div>
    </footer>
    <script>
				
				$("#update").click(function(){
					 var formData = new FormData($('#updateForm')[0]);
					formData.append('head',$('#head')[0].files[0]);
						$.ajax({
							url:'updateInfo',
							type:'post',
							data:formData,
							async:false,
							cache:false,
							contentType:false,
							processData:false,
							success:function(result){
								if(result.code==2){
									$("#alertDiv").attr("class","alert alert-warning");
									$("#alertDiv").css("display", "block");
									$("#alertDiv").html(result.msg);
								}else{
									$("#alertDiv").attr("class","alert alert-success");
									$("#alertDiv").css("display", "block");
									$("#alertDiv").html(result.msg+"3秒后跳回主页。");
									alert("修改成功！")
									setTimeout("location.href = 'person.html'",3000);//3000毫秒后跳转
								}	
							}
						}); 
					 
				});
				
					//author：hooy
					//修改个人资料页面原始信息自动填充
					$(document).ready(function() {
						$.ajax({
							type:"POST",
							url:"getUserInfo",
								success:function(data){
								if(data.code === 1){
									var obj = data.data;
									$('#unamme').val(obj.unamme);
									$('#nickname').val(obj.nickname);
									$('#uphone').val(obj.uphone);
									$('#uemail').val(obj.uemail);
									$('#originalPassword').val(obj.originalPassword);
									$('#myhead').attr('src',obj.head);
								}else{
									alert(data.msg);
									window.location.href = '/index.html';
								}
							},
							error:function(){
								alert("请先登录");
								window.location.href = '/login.html';
							}
						
						});
					});
				</script>
				<script type="text/javascript">
				$("#updatepassword").click(function(){
					 var formData = new FormData($('#password')[0]);
						$.ajax({
							url:'passwordInfo',
							type:'post',
							data:formData,
							async:false,
							cache:false,
							contentType:false,
							processData:false,
							success:function(result){
								if(result.code==2){
									$("#alertDiv").attr("class","alert alert-warning");
									$("#alertDiv").css("display", "block");
									$("#alertDiv").html(result.msg);
								}else{
									alert("修改成功，3秒后跳转到登录页面")
									setTimeout("location.href = 'login.html'",3000);//3000毫秒后跳转
								}	
							}
						}); 
					 
				});
</script>
	 
</body>
</html>